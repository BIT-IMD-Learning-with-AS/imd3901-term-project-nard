<!-- CREATOR CREDITS 
can: https://sketchfab.com/3d-models/litter-can-42552e4ab8c241319e9ec91dbb0d6de3
-->

<!DOCTYPE html>
<html>
    <head>
      <meta name="description" content="NARD's Alpha Prototype!">
      
      <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
      <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
      <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
      <link rel="stylesheet" href="/css/user-gesture.css">

      <script>
        // Registering a-scene
        AFRAME.registerComponent('start-experience', {
            init: function () {
              console.log('scene loaded');
              // Fade in
              var player = document.getElementById("player");
              let blocker = document.createElement('a-sphere');
              blocker.setAttribute('radius', '0.05');
              blocker.setAttribute('material', "shader:flat; color: white; opacity: 1.0; side: double");
              blocker.setAttribute('id', "artifact");
              blocker.setAttribute('animation', 'property: material.opacity; from: 1.0; to: 0.0 dur: 500; dir: alternate;');
              player.appendChild(blocker);

              // Camera & canoe animation
              let canoe = document.querySelector('a-scene').querySelector('#canoe');
              let cam = document.querySelector('a-scene').querySelector('#player');
              canoe.setAttribute('animation', "property:position; to: 0 3 -40; dur: 50000; easing: linear;");
              cam.setAttribute('animation', "property:position; to: 0 4 -40; dur: 46800; easing: linear;");

              setTimeout(function () {
                // Fade out
                var player = document.getElementById("player");
                let blocker = document.createElement('a-sphere');
                blocker.setAttribute('radius', '0.05');
                blocker.setAttribute('material', "shader:flat; color: white; opacity: 0.0; side: double");
                blocker.setAttribute('id', "artifact");
                blocker.setAttribute('animation', 'property: material.opacity; from: 0.0; to: 1.0 dur: 500; dir: alternate;');
                player.appendChild(blocker);
                
                 // Timer before fade out
                setTimeout(function () {
                  window.location.replace("http://localhost:8080/sweetGrassEnvironment.html");
                }, 1200);

              }, 15000);

              typeWriter();
            }
        });

        var i = 0;
        var part1 = "You have returned the artifact to it's rightful place and have brought peace upon it, ni√°:wen";
        var part2 = "Your last stop takes place in the present, the life of the Akwesasne people in today's day and age";
        var part3 = "Find the last artifact and return it to its rightful place";
        var speed = 50;
        var part = 0;
        var tagHolders = ["narrationPT1", "narrationPT2", "narrationPT3"];

        var txts=[part1, part2, part3];

        function typeWriter() {
          if(part < 3){
            if (i < txts[part].length) {
              document.getElementById(tagHolders[part]).innerHTML += txts[part].charAt(i);
              i++;
              setTimeout(typeWriter, speed);

              if(i == txts[part].length){
                i = 0;
                part++;
              }
            }
          }
        }
        
    </script>

    </head>
    <body>
      <a-scene start-experience environment="preset: forest;  groundTexture:walkernoise; fog:0; shadow: true">
        
        <a-curvedimage src="assets/Swampy_forest_panorama_new.png" theta-lenght="270" theta-start="110" radius="100" height="100" width="180" position="0 5 0" ></a-curvedimage>
        
        <!-- narration -->
        <div id="narration-info">
          <p class="noselect" id="narrationPT1" style="font-size:110%;"></p>
          <p class="noselect" id="narrationPT2" style="font-size:110%; top: 20%;"></p>
          <p class="noselect" id="narrationPT3" style="font-size:130%; top: 30%;"></p>
        </div>
      
        <a-assets>
            <audio id="river" src="assets/riverSound2.mp3" preload="auto"></audio>
            <a-asset-item id="canoeModel" response-type="arraybuffer" src="assets/canoe/canoe.glb"></a-asset-item>
            <a-asset-item id="lowDeer" response-type="arraybuffer" src="assets/low_poly_deer/scene.gltf"></a-asset-item>
            <a-asset-item id="pineTree" response-type="arraybuffer" src="assets/pine_tree/scene.gltf"></a-asset-item>
            <a-asset-item id="deer" response-type="arraybuffer" src="assets/low_poly_deer/scene.gltf"></a-asset-item>
            <a-asset-item id="fish" response-type="arraybuffer" src="assets/the_fish_particle/scene.gltf"></a-asset-item>
            <a-asset-item id="can" response-type="arraybuffer" src="assets/litter_can/scene.gltf"></a-asset-item>
            <a-asset-item id="pineTree" response-type="arraybuffer" src="assets/pine_tree/scene.gltf"></a-asset-item>
        </a-assets>
        
            <!-- Pine Trees-->
            <a-entity gltf-model= "#pineTree" id="pineTree" position="15.980 -0.201 25.826" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>        
            <a-entity gltf-model= "#pineTree" id="pineTree2" position="15.980 -0.201 7.866" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            <a-entity gltf-model= "#pineTree" id="pineTree3" position="15.980 -0.201 -10.094" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            <a-entity gltf-model= "#pineTree" id="pineTree4" position="15.980 -0.201 -28.054" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
            <a-entity gltf-model= "#pineTree" id="pineTree5" position="15.980 -0.201 -46.014" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
            <a-entity gltf-model= "#pineTree" id="pineTree6" position="15.980 -0.201 -63.974" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
            <a-entity gltf-model= "#pineTree" id="pineTree7" position="15.980 -0.201 -81.934" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
            <a-entity gltf-model= "#pineTree" id="pineTree8" position="15.980 -0.201 -99.894" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
            
            <a-entity gltf-model= "#pineTree" id="pineTree9" position="-15.980 -0.201 -25.826" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>  
            <a-entity gltf-model= "#pineTree" id="pineTree10" position="-15.980 -0.201 -7.866" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            <a-entity gltf-model= "#pineTree" id="pineTree11" position="-15.980 -0.201 10.094" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            <a-entity gltf-model= "#pineTree" id="pineTree12" position="-15.980 -0.201 -28.054" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
            <a-entity gltf-model= "#pineTree" id="pineTree13" position="-15.980 -0.201 -46.014" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
            <a-entity gltf-model= "#pineTree" id="pineTree14" position="-15.980 -0.201 -63.974" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
            <a-entity gltf-model= "#pineTree" id="pineTree15" position="-15.980 -0.201 -81.934" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
            <a-entity gltf-model= "#pineTree" id="pineTree16" position="-15.980 -0.201 -99.894" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
   
            <a-entity gltf-model= "#pineTree" id="pineTree17" position="23.718 -0.201 18.372" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>        
            <a-entity gltf-model= "#pineTree" id="pineTree18" position="23.718 -0.201 -1.784" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>  
            <a-entity gltf-model= "#pineTree" id="pineTree19" position="23.718 -0.201 -21.94" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            <a-entity gltf-model= "#pineTree" id="pineTree20" position="23.718 -0.201 -42.096" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>    
            <a-entity gltf-model= "#pineTree" id="pineTree21" position="23.718 -0.201 -62.252" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            <a-entity gltf-model= "#pineTree" id="pineTree22" position="23.718 -0.201 -82.408" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            <a-entity gltf-model= "#pineTree" id="pineTree23" position="23.718 -0.201 -102.564" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            <a-entity gltf-model= "#pineTree" id="pineTree24" position="23.718 -0.201 -122.72" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
   
            <a-entity gltf-model= "#pineTree" id="pineTree17" position="-23.718 -0.201 18.372" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>        
            <a-entity gltf-model= "#pineTree" id="pineTree18" position="-23.718 -0.201 -1.784" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>  
            <a-entity gltf-model= "#pineTree" id="pineTree19" position="-23.718 -0.201 -21.94" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            <a-entity gltf-model= "#pineTree" id="pineTree20" position="-23.718 -0.201 -42.096" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>    
            <a-entity gltf-model= "#pineTree" id="pineTree21" position="-23.718 -0.201 -62.252" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            <a-entity gltf-model= "#pineTree" id="pineTree22" position="-23.718 -0.201 -82.408" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            <a-entity gltf-model= "#pineTree" id="pineTree23" position="-23.718 -0.201 -102.564" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            <a-entity gltf-model= "#pineTree" id="pineTree24" position="-23.718 -0.201 -122.72" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
   
            <a-entity gltf-model= "#pineTree" id="pineTree25" position="7.392 -0.201 34.484" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            <a-entity gltf-model= "#pineTree" id="pineTree26" position="-4.922 -0.201 34.484" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            <a-entity gltf-model= "#pineTree" id="pineTree27" position="-0.034 -0.201 -81.934" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
            
            <a-entity gltf-model="#can" id="can" position="-4 0.7 -1" rotation="0 0 20" scale="0.02 0.02 0.02"></a-entity>
            <a-entity gltf-model="#can" id="can" position="-7 0.7 -2" rotation="0 0 70" scale="0.02 0.02 0.02"></a-entity>
            <a-entity gltf-model="#can" id="can" position="6 0.7 6" rotation="0 0 -10" scale="0.02 0.02 0.02"></a-entity>
            <a-entity gltf-model="#can" id="can" position="3 0.7 -10" rotation="0 0 -40" scale="0.02 0.02 0.02"></a-entity>

            <a-entity class="ambient-music" sound="src:#river; autoplay:true;"></a-entity>

        <!-- RIVER -->
        <!-- depth = wave length, width = width, density = wave intensity -->
        <a-ocean color="#3D8695" depth="15" width="25" density="10" position="0 0.7 -30" ></a-ocean>
        <a-ocean color="#3D8695" depth="15" width="25" density="10" position="0 0.7 -20" ></a-ocean>
        <a-ocean color="#3D8695" depth="15" width="25" density="10" position="0 0.7 -10" ></a-ocean>
        <a-ocean color="#3D8695" depth="15" width="25" density="10" position="0 0.7 3" ></a-ocean>
        <a-ocean color="#3D8695" depth="15" width="25" density="10" position="0 0.7 13" ></a-ocean>
        <a-ocean color="#3D8695" depth="15" width="25" density="10" position="0 0.7 23" ></a-ocean>

        <!-- river floor -->
        <a-plane height="100" width="25" position="0 0.2 0" rotation="-90 0 0" material="color:#2C4E55"></a-plane>

        <!-- canoe -->
        <a-entity boat gltf-model= "#canoeModel" id="canoe" position="0 3 24.100" rotation="0 90 0" scale="0.250 0.160 0.140"  material="color:brown"> </a-entity>
        
        <a-entity camera id="player" look-controls position="0 4 20"></a-entity>

      </a-scene>

  </body>
</html>