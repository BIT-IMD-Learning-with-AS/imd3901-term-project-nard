<!-- CREATOR CREDITS -->
<!-- -->

<!DOCTYPE html>
<html>
    <head>
      <meta name="description" content="NARD's Alpha Prototype!">
      
      <!-- DO NOT TOUCH -->
      <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
      <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
      <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
      <!-- DO NOT TOUCH -->

      <link rel="stylesheet" href="/css/user-gesture.css">

      <script>
        // Registering a-scene
        AFRAME.registerComponent('start-experience', {
            init: function () {
              console.log('scene loaded');
              // Fade in
              var player = document.getElementById("player");
              let blocker = document.createElement('a-sphere');
              blocker.setAttribute('radius', '0.05');
              blocker.setAttribute('material', "shader:flat; color: white; opacity: 1.0; side: double");
              blocker.setAttribute('id', "artifact");
              blocker.setAttribute('animation', 'property: material.opacity; from: 1.0; to: 0.0 dur: 500; dir: alternate;');
              player.appendChild(blocker);

              // Camera & canoe animation
              let canoe = document.querySelector('a-scene').querySelector('#canoe');
              let cam = document.querySelector('a-scene').querySelector('#player');
              canoe.setAttribute('animation', "property:position; to: 0 3 -40; dur: 60000; easing: linear;");
              cam.setAttribute('animation', "property:position; to: 0 4 -40; dur: 58300; easing: linear;");

              typeWriter();

              // Timer before fade out
              setTimeout(function () {
                canoe.setAttribute('animation', "property:position; to: 0 3 -40; dur: 90000; easing: linear;");
                cam.removeAttribute("animation");
                let txt = document.querySelector('#narration-info');
                txt.style.opacity= 0;
                let cred = document.querySelector('#credits');
                cred.style.animationPlayState="running";
              }, 20000);

              // Timer before fade out
              setTimeout(function () {
                // Fade out
                var camera = document.getElementById("player");
                let blocker = document.createElement('a-sphere');
                blocker.setAttribute('radius', '0.05');
                blocker.setAttribute('material', "shader:flat; color: black; opacity: 0.0; side: double");
                blocker.setAttribute('id', "fade");
                blocker.setAttribute('animation', 'property: material.opacity; from: 0.0; to: 1.0 dur: 500; dir: alternate;');
                camera.appendChild(blocker);
              }, 33800);
          
            }
        });

        var i = 0;
        var part1 = "You have returned all lost artifacts back to its rightful place and brought them peace";
        var part2 = "This is the ending of our story. You got to see the history of the Akwesasne people, the obstacles they overcame, and how they continue to appreciate their culture to this day";
        var part3 = "We hope you enjoyed the Canoe Journey story, ni√°:wen!";
        var speed = 50;
        var part = 0;
        var tagHolders = ["narrationPT1", "narrationPT2", "narrationPT3"];

        var txts=[part1, part2, part3];

        function typeWriter() {
          if(part < 3){
            if (i < txts[part].length) {
              document.getElementById(tagHolders[part]).innerHTML += txts[part].charAt(i);
              i++;
              setTimeout(typeWriter, speed);

              if(i == txts[part].length){
                i = 0;
                part++;
              }
            }
          }
        }
        
    </script>

    </head>
    <body>

         <!-- narration -->
         <div id="narration-info">
          <p class="noselect" id="narrationPT1" style="font-size:110%;"></p>
          <p class="noselect" id="narrationPT2" style="font-size:110%; top: 20%;"></p>
          <p class="noselect" id="narrationPT3" style="font-size:130%; top: 30%;"></p>
        </div>

        <div id="credits">
          <p style="font-size:110%;">Credits<br><br><br>Creators:<br><br>Natalia Ocampo<br>Damla Durhan<br>Riya Yallabandi<br>Andrew Holland<br><br>Authors:<br><br>Algonquin kiddies</p>
        </div>

      <!-- A-SCENE -->
      <a-scene start-experience environment="preset: forest; groundTexture:walkernoise; fog:0; shadow: true">
     
      <a-assets>
          <!--<a-asset-item id="bgMusic"  preload="auto" response-type="arraybuffer" src="assets/The Plight of the Samurai - Traditional Japanese Music.mp3"></a-asset-item>-->
            <a-asset-item id="canoeModel" response-type="arraybuffer" src="assets/canoe/canoe.glb"></a-asset-item>
            <a-asset-item id="pineTree" response-type="arraybuffer" src="assets/pine_tree/scene.gltf"></a-asset-item>
        </a-assets>


        <!-- Pine Trees-->
        <a-entity gltf-model= "#pineTree" id="pineTree" position="21 -0.201 25.826" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>        
        <a-entity gltf-model= "#pineTree" id="pineTree2" position="21 -0.201 7.866" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
        <a-entity gltf-model= "#pineTree" id="pineTree3" position="21 -0.201 -10.094" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
        <a-entity gltf-model= "#pineTree" id="pineTree4" position="21 -0.201 -28.054" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
        <a-entity gltf-model= "#pineTree" id="pineTree5" position="21 -0.201 -46.014" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
        <a-entity gltf-model= "#pineTree" id="pineTree6" position="21 -0.201 -63.974" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
        <a-entity gltf-model= "#pineTree" id="pineTree7" position="21 -0.201 -81.934" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
        <a-entity gltf-model= "#pineTree" id="pineTree8" position="15 -0.201 -99.894" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
        
        <a-entity gltf-model= "#pineTree" id="pineTree9" position="-21 -0.201 -25.826" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>  
        <a-entity gltf-model= "#pineTree" id="pineTree10" position="-21 -0.201 -7.866" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
        <a-entity gltf-model= "#pineTree" id="pineTree11" position="-21 -0.201 10.094" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
        <a-entity gltf-model= "#pineTree" id="pineTree12" position="-21 -0.201 -28.054" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
        <a-entity gltf-model= "#pineTree" id="pineTree13" position="-21 -0.201 -46.014" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
        <a-entity gltf-model= "#pineTree" id="pineTree14" position="-21 -0.201 -63.974" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
        <a-entity gltf-model= "#pineTree" id="pineTree15" position="-21 -0.201 -81.934" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
        <a-entity gltf-model= "#pineTree" id="pineTree16" position="-15 -0.201 -99.894" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity> 
    
        <a-entity gltf-model= "#pineTree" id="pineTree17" position="15 -0.201 18.372" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>        
        <a-entity gltf-model= "#pineTree" id="pineTree18" position="25 -0.201 -1.784" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>  
        <a-entity gltf-model= "#pineTree" id="pineTree19" position="25 -0.201 -21.94" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
        <a-entity gltf-model= "#pineTree" id="pineTree20" position="25 -0.201 -42.096" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>    
        <a-entity gltf-model= "#pineTree" id="pineTree21" position="25 -0.201 -62.252" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
        <a-entity gltf-model= "#pineTree" id="pineTree22" position="25 -0.201 -82.408" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
        <a-entity gltf-model= "#pineTree" id="pineTree23" position="25 -0.201 -102.564" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
        <a-entity gltf-model= "#pineTree" id="pineTree24" position="15 -0.201 -122.72" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
    
        <a-entity gltf-model= "#pineTree" id="pineTree17" position="-15 -0.201 18.372" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>        
        <a-entity gltf-model= "#pineTree" id="pineTree18" position="-25 -0.201 -1.784" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>  
        <a-entity gltf-model= "#pineTree" id="pineTree19" position="-25 -0.201 -21.94" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
        <a-entity gltf-model= "#pineTree" id="pineTree20" position="-25 -0.201 -42.096" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>    
        <a-entity gltf-model= "#pineTree" id="pineTree21" position="-25 -0.201 -62.252" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
        <a-entity gltf-model= "#pineTree" id="pineTree22" position="-25 -0.201 -82.408" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
        <a-entity gltf-model= "#pineTree" id="pineTree23" position="-25 -0.201 -102.564" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
        <a-entity gltf-model= "#pineTree" id="pineTree24" position="-15 -0.201 -122.72" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
    
        <a-entity gltf-model= "#pineTree" id="pineTree25" position="7.392 -0.201 34.484" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
        <a-entity gltf-model= "#pineTree" id="pineTree26" position="-4.922 -0.201 34.484" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>   
        <a-entity gltf-model= "#pineTree" id="pineTree27" position="-0.034 -0.201 -81.934" rotation="0 90 0" scale="0.120 0.120 0.120" ></a-entity>    

    <!-- RIVER -->
    <!-- depth = wave length, width = width, density = wave intensity -->
    <a-ocean color="#3D8695" depth="15" width="25" density="10" position="0 1.5 -30"></a-ocean>
    <a-ocean color="#3D8695" depth="15" width="25" density="10" position="0 1.5 -20" ></a-ocean>
    <a-ocean color="#3D8695" depth="15" width="25" density="10" position="0 1.5 -10" ></a-ocean>
    <a-ocean color="#3D8695" depth="15" width="25" density="10" position="0 1.5 3" ></a-ocean>
    <a-ocean color="#3D8695" depth="15" width="25" density="10" position="0 1.5 13" ></a-ocean>
    <a-ocean color="#3D8695" depth="15" width="25" density="10" position="0 1.5 23" ></a-ocean>


        <!-- canoe -->
        <!--DO NOT CHANGE it's tagname (boat) or id (canoe) -->
        <a-entity boat gltf-model= "#canoeModel" id="canoe" position="0 3 31.8" rotation="0 90 0" scale="0.160 0.160 0.140"  material="color:brown"> </a-entity>
        
        <a-entity camera id="player" look-controls position="0 4 30"></a-entity>

      </a-scene>

  </body>
</html>